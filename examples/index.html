<body>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <script>
    const id = Math.random().toString(36).substring(7);
    const topic = "topic";
    const isSecure = window.location.protocol === "https:";
    let connection = isSecure ? "wss://" : "ws://";
    connection += "mdd:loislane@37.97.203.138";
    connection += isSecure ? ":8084" : ":8083";
    const client = mqtt.connect(connection, {
      rejectUnauthorized: false
    });

    client.on("message", messageReceived);
    client.on("connect", function () {
      println("connected!");
      client.subscribe("topic");
      client.publish("topic", "Hello from HTML");
    });
    client.on("error", function (error) {
      println("Error: " + error);
    });


    function messageReceived(topic, message) {
      println(topic + ": " + message);
    }
    function println(message) {
      const p = document.createElement("p");
      p.textContent = message;
      document.querySelector("body").append(p);
    }
  </script>
</body>
